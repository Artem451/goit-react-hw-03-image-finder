{"version":3,"sources":["components/Searchbar/Searchbar.jsx","apiService/apiService.js","components/ImageGalleryItem/ImageGalleryItem.jsx","components/Button/Button.jsx","components/Modal/Modal.jsx","components/ImageGallery/ImageGallery.jsx","App.jsx","index.js"],"names":["Searchbar","state","imgName","handleImgNameChange","event","setState","currentTarget","value","toLowerCase","handleSubmit","preventDefault","trim","props","onSearch","toast","error","className","type","onClick","this","autocomplete","autofocus","placeholder","onChange","Component","apiService","page","a","fetch","response","ok","json","Promise","reject","Error","ImageGalleryItem","images","map","image","webformatURL","tags","id","src","alt","Button","Modal","window","addEventListener","removeEventListener","showImg","largeImageURL","ImageGallery","isModalOpen","onImgClick","status","onLoadMore","prevState","autoScroll","scrollTo","top","document","documentElement","scrollHeight","behavior","onModalOpen","onModalClose","code","target","prevProps","prevImg","searchRequest","nextImg","prevPage","nextPage","setTimeout","loadImages","loadMoreImages","then","hits","color","height","width","length","App","handleFormSubmit","console","log","ReactDOM","render","querySelector"],"mappings":"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","file":"static/js/main.6f35fe31.chunk.js","sourcesContent":["import React from 'react';\nimport { Component } from 'react';\nimport { toast } from 'react-toastify';\n\nclass Searchbar extends Component {\n  state = {\n    imgName: '',\n  };\n\n  handleImgNameChange = event => {\n    this.setState({ imgName: event.currentTarget.value.toLowerCase() });\n  };\n\n  handleSubmit = event => {\n    event.preventDefault();\n\n    if (this.state.imgName.trim() === '') {\n      toast.error('Enter search request');\n      return;\n    }\n\n    this.props.onSearch(this.state.imgName);\n    this.setState({ imgName: '' });\n  };\n\n  render() {\n    return (\n      <header className=\"Searchbar\">\n        <form className=\"SearchForm\">\n          <button\n            type=\"submit\"\n            className=\"SearchForm-button\"\n            onClick={this.handleSubmit}\n          >\n            <span className=\"SearchForm-button-label\">Search</span>\n          </button>\n\n          <input\n            className=\"SearchForm-input\"\n            type=\"text\"\n            autocomplete=\"off\"\n            autofocus\n            placeholder=\"Search images and photos\"\n            onChange={this.handleImgNameChange}\n            value={this.state.imgName}\n          />\n        </form>\n      </header>\n    );\n  }\n}\n\nexport default Searchbar;\n","export default async function apiService(imgName, page) {\n  const API_KEY = '22764492-08543241292e25caceb14f7aa';\n  const response = await fetch(\n    `https://pixabay.com/api/?q=${imgName}&page=${page}&key=${API_KEY}&image_type=photo&orientation=horizontal&per_page=12\n    `,\n  );\n  if (response.ok) {\n    return response.json();\n  }\n  return await Promise.reject(new Error('Что то пошло не так'));\n}\n","import React from 'react';\n\nfunction ImageGalleryItem({ images, onClick }) {\n  return images.map(image => {\n    const { webformatURL, tags, id } = image;\n    return (\n      <li key={id} className=\"ImageGalleryItem\">\n        <img\n          src={webformatURL}\n          alt={tags}\n          className=\"ImageGalleryItem-image\"\n          onClick={() => {\n            onClick(image);\n          }}\n        />\n      </li>\n    );\n  });\n}\n\nexport default ImageGalleryItem;\n","import React from 'react';\n\nfunction Button({ onClick }) {\n  return (\n    <div className=\"Conteiner\">\n      <button type=\"button\" className=\"Button\" onClick={onClick}>\n        Load more\n      </button>\n    </div>\n  );\n}\n\nexport default Button;\n","import { Component } from 'react';\nimport React from 'react';\nclass Modal extends Component {\n  componentDidMount() {\n    window.addEventListener('keydown', this.props.onClick);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.props.onClick);\n  }\n\n  render() {\n    return (\n      <div className=\"Overlay\" onClick={this.props.onClick}>\n        <div className=\"Modal\">\n          <img\n            src={this.props.showImg.largeImageURL}\n            alt={this.props.showImg.tags}\n          />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Modal;\n","import React, { Component } from 'react';\nimport { toast } from 'react-toastify';\nimport Loader from 'react-loader-spinner';\nimport apiService from '../../apiService/apiService';\nimport ImageGalleryItem from '../ImageGalleryItem/ImageGalleryItem';\nimport Button from '../Button/Button';\nimport Modal from '../Modal/Modal';\n\nclass ImageGallery extends Component {\n  state = {\n    images: [],\n    error: null,\n    page: 1,\n    isModalOpen: false,\n    onImgClick: '',\n    status: 'idle',\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    const prevImg = prevProps.searchRequest;\n    const nextImg = this.props.searchRequest;\n    const prevPage = prevState.page;\n    const nextPage = this.state.page;\n\n    if (prevImg !== nextImg) {\n      this.setState({ images: [], page: 1, status: 'pending' });\n      setTimeout(() => {\n        this.loadImages();\n      }, 100);\n    }\n\n    if (prevPage !== nextPage) {\n      this.loadMoreImages();\n    }\n  }\n\n  async loadImages() {\n    await apiService(this.props.searchRequest, this.state.page).then(images =>\n      this.setState({ images: images.hits, status: 'resolved' }),\n    );\n    this.autoScroll();\n  }\n\n  async loadMoreImages() {\n    await apiService(this.props.searchRequest, this.state.page).then(images => {\n      this.setState(prevState => ({\n        images: [...prevState.images, ...images.hits],\n        status: 'resolved',\n      }));\n    });\n    this.autoScroll();\n  }\n\n  onLoadMore = () => {\n    this.setState(prevState => ({\n      page: prevState.page + 1,\n    }));\n  };\n\n  autoScroll = () => {\n    window.scrollTo({\n      top: document.documentElement.scrollHeight,\n      behavior: 'smooth',\n    });\n  };\n\n  onModalOpen = image => {\n    this.setState({ isModalOpen: true, onImgClick: image });\n  };\n\n  onModalClose = event => {\n    if (event.code === 'Escape' || event.currentTarget === event.target) {\n      this.setState({ isModalOpen: false });\n    }\n  };\n\n  render() {\n    if (this.state.status === 'idle') {\n      return (\n        <div className=\"Conteiner\">\n          <p>Please enter search request</p>\n        </div>\n      );\n    }\n\n    if (this.state.status === 'pending') {\n      return <Loader type=\"ThreeDots\" color=\"#00BFFF\" height={80} width={80} />;\n    }\n\n    if (this.state.status === 'resolved') {\n      return (\n        <div>\n          <ul className=\"ImageGallery\">\n            <ImageGalleryItem\n              images={this.state.images}\n              onClick={this.onModalOpen}\n            />\n          </ul>\n          {this.state.images.length !== 0 ? (\n            <Button onClick={this.onLoadMore} />\n          ) : (\n            ''\n          )}\n          {this.state.isModalOpen && (\n            <Modal\n              showImg={this.state.onImgClick}\n              onClick={this.onModalClose}\n            />\n          )}\n        </div>\n      );\n    }\n  }\n}\n\nexport default ImageGallery;\n","import React from 'react';\nimport { Component } from 'react';\nimport { ToastContainer } from 'react-toastify';\nimport Searchbar from './components/Searchbar/Searchbar';\nimport ImageGallery from './components/ImageGallery/ImageGallery';\n\nexport default class App extends Component {\n  state = {\n    imgName: '',\n  };\n\n  handleFormSubmit = imgName => {\n    console.log(imgName);\n    this.setState({ imgName });\n  };\n\n  render() {\n    return (\n      <>\n        <ToastContainer />\n        <Searchbar onSearch={this.handleFormSubmit} />\n        <ImageGallery searchRequest={this.state.imgName} />\n      </>\n    );\n  }\n}\n","import App from './App';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nReactDOM.render(<App />, document.querySelector('#root'));\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n"],"sourceRoot":""}